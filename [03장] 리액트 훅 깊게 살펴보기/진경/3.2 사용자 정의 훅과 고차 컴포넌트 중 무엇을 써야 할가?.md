> 사용자 정의 훅과 고차 컴포넌트를 이용해서 중복 코드 작성을 피할 수 있다.

### 3.2.1 사용자 정의 훅

- 서로 다른 컴포넌트 내부에서 같은 로직을 공유하고자 할 때 사용된다.
- 리액트 훅을 기반으로 하기 때문에 리액트에서만 사용할 수 있다.
- 규칙
  - use로 시작하는 함수를 만들어야 한다.
  - `use-Hooks`, `react-use`, `ahooks` 등의 저장소에서 찾아 볼 수 있다.

### 3.2.2 고차 컴포넌트

- 컴포넌트 자체의 로직을 재사용하기 위한 방법이다.
- JS의 일급 객체, 함수의 특징을 이용하므로 굳이 리액트가 아니더라도 JS 환경에서 널리 쓰일 수 있다.
- `with`로 시작한다.
  - 컴포넌트를 인수로 받게 된다.
  - props를 임의로 수정, 추가, 삭제하는 일은 없어야 한다.
- `React.memo`는 고차 컴포넌트이다.
- props의 변화가 없음에도 컴포넌트의 렌더링이 일어나는 상황(부모 컴포넌트에서 리렌더링 됐을 때)을 방지하기 위해 만들어진 리액트의 고차 컴포넌트이다.

```
const ChildComponent = memo(() => {
  ...
})
```

- useMemo도 동일한 역할을 할 수 있지만 이는 값을 반환하기 때문에 JSX 함수 방식이 아닌 {}을 사용한 할당식을 사용한다는 차이점이 있다.

```
const MemoizedChildComponent = useMemo(() => {
  return <ChildComponent value="hello" />
}, [])

...

return(
  <>
    {MemoizedChildComponent} // 다음과 같이 쓰인다. 고로 목적과 용도가 뚜렷한 memo를 사용하는 편이 좋다.
  </>
)
```

### 3.2.3 사용자 정의 훅과 고차 컴포넌트 중 무엇을 써야 할까?

- 사용자 정의 훅
  - 단순히 useState, useEffect와 같이 리액트에서 제공하는 훅으로만 공통 로직을 격리할 수 있다면 사용자 정의 훅을 사용하는 것이 좋다.
- 고차 컴포넌트 사용해야 하는 경우
  - 로그인 되지 않은 어떤 사용자가 컴포넌트에 접근하려 할 떄 애플리케이션 관점에서 컴포넌트를 감추고 로그인을 요구하는 공통 컴포넌트를 감추고 로그인을 요구하는 공통 컴포넌트를 노출하는 상황
  - 에러가 발생했을떄 현재 컴포넌트 대신 에러가 발생했음을 알릴 수 있는 컴포넌트를 노출하는 경우
