### Next.js 13κ³Ό λ¦¬μ•΅νΈ 18

#### 11.1.1 λΌμ°ν…

Next.js 13 λ¶€ν„°λ” app λ””λ ‰ν„°λ¦¬ λ‚΄λ¶€μ ν΄λ”λ…μ΄ λΌμ°ν…μ΄ λλ©°, μ΄ ν΄λ”μ— ν¬ν•¨λ  μ μλ” νμΌλ…(μμ•½μ–΄)μ€ λ‡ κ°€μ§€λ΅ μ ν• λΌ μλ‹¤.

1. layout.js

- λ£¨νΈμ—μ„λ” λ‹¨ ν•λ‚μ layoutμ„ λ§λ“¤μ–΄ λ‘ μ μλ‹¤. λ¨λ“  νμ΄μ§€μ— μν–¥μ„ λ―ΈμΉλ” κ³µν†µ λ μ΄μ•„μ›ƒμ΄λ‹¤.
- μ£Όμ
  - app λ””λ ‰ν„°λ¦¬ λ‚΄λ¶€μ—μ„μ μμ•½μ–΄λ‹¤. λ¬΄μ΅°κ±΄ layout.{js|jsx|ts|tsx} λ΅ μ‚¬μ©ν•΄μ•Ό ν•λ©° λ μ΄μ•„μ›ƒ μ΄μ™Έμ λ‹¤λ¥Έ λ©μ μΌλ΅ μ‚¬μ©ν•  μ μ—†λ‹¤.
  - API μ”μ²­κ³Ό κ°™μ€ λΉ„λ™κΈ° μ‘μ—…μ„ μν–‰ν•  μ μλ‹¤.

2. page.js

- pageκ°€ λ°›λ” props

  - params

    - μ„ νƒκ°’μ΄λ‹¤. `λ™μ  λΌμ°νΈ νλΌλ―Έν„°`λ¥Ό μ‚¬μ©ν•  κ²½μ° ν•΄λ‹Ή νλΌλ―Έν„°μ— κ°’μ΄ λ“¤μ–΄μ¨λ‹¤.

          λ™μ  λΌμ°νΈ νλΌλ―Έν„°

          - λΌμ°ν… : λΌμ°ν… κ²½λ΅(route)λ¥Ό μ°Ύμ•„κ°€λ” ν–‰μ„λ¥Ό λ§ν•λ‹¤. λΌμ°ν…μ„ ν†µν•΄μ„ λ‹¤λ¥Έ κ²½λ΅(url μ£Όμ†)μ— λ”°λΌ λ‹¤λ¥Έ ν™”λ©΄μ„ λ³΄μ—¬ μ¤„ μ μμµλ‹λ‹¤.
          - λ™μ  λΌμ°ν… : μ •μ μ΄μ§€ μ•μ€, λ™μ μΌ μ μλ” κ²½λ΅μ— λ€ν•μ—¬ λΌμ°ν…μ΄λ‹¤. λΌμ°νΈ κ²½λ΅μ— νΉμ • κ°’μ„ λ„£μ–΄ ν•΄λ‹Ή νμ΄μ§€λ΅ μ΄λ™ν•  μ μκ² ν•©λ‹λ‹¤. λ™μ  λΌμ°ν…μ€ λΌμ°νΈ κ²½λ΅μ— νΉμ • κ°’μ„ λ„£μ–΄ ν•΄λ‹Ήν•λ” νμ΄μ§€λ΅ μ΄λ™ν•  μ μκ² ν•λ‹¤.

          - λ™μ μΈ κ²½λ΅λ¥Ό μ²λ¦¬ν•  μ μλ” λ°©λ²•μΌλ΅ `Path Parameter(URL parameter)` μ™€ `Query Parameter`κ°€ μλ‹¤.

          1. Path Parameter(URL parameter)

          - `localhost:3000/product/2`
            `localhost:3000/product/45`
            μ κ²½μ° λΌμ°νΈ κ²½λ΅ λμ— λ“¤μ–΄κ°€λ” κ°κΈ° λ‹¤λ¥Έ id κ°’λ“¤μ„ μ €μ¥ν•λ λ§¤κ° λ³€μλ¥Ό **Path Parameter** λΌκ³  ν•λ‹¤.
          - `:`λ” path parameterκ°€ μ¬ κ²ƒμ„μ„ μλ―Έν•©λ‹λ‹¤.
          - `path='/product/:id` μ—μ„ idλ” path parameterμ μ΄λ¦„μ„ μλ―Έν•©λ‹λ‹¤.
          - λ¦¬μ•΅νΈμ—μ„ `useParams` λ¥Ό μ΄μ©ν•΄μ„ `const {id} = useParams()` μ™€ κ°™μ΄ path parameter μ— μ ‘κ·Όν•  μ μλ‹¤.

          2. Query parameter

          - `?`λ΅ μ‹μ‘ν•μ—¬ μ—¬λ¬ κ°μ νλΌλ―Έν„°λ” `&`λ΅ κµ¬λ¶„λ©λ‹λ‹¤.
          - `https://www.example.com/products?page=2&size=10

    `

  - searchParams

    - μ›Ή APIμ μΌλ¶€λ΅, URLμ **μΏΌλ¦¬ νλΌλ―Έν„°**λ¥Ό μ‰½κ² λ‹¤λ£¨κΈ° μ„ν• μΈν„°νμ΄μ¤λ¥Ό μ κ³µν•λ‹¤.
    - URLμ—μ„ `?a=1`κ³Ό κ°™μ€ URLSearchParamsλ¥Ό μλ―Έν•λ‹¤. μλ¥Ό λ“¤μ–΄ `?a=1&b=2`λ΅ μ ‘κ·Όν•  κ²½μ° searchParams μ—λ” `{ a: '1', b: '2' }`λΌλ” js κ°μ²΄ κ°’μ΄ μ¤κ² λλ‹¤.
    - μ£Όλ΅ `URL` κ°μ²΄μ™€ ν•¨κ» μ‚¬μ©λλ©°, URLμ **μΏΌλ¦¬ νλΌλ―Έν„°**λ¥Ό μ„¤μ •(append: μ¶”κ°€), μ½κΈ°(get), μμ •(set) λ° μ‚­μ (delete) ν•  μ μλ‹¤.

      ```
      // URL κ°μ²΄ μƒμ„±
      const url = new URL('https://www.example.com/search?query=apple&sort=price');

      // searchParams μ ‘κ·Ό
      const params = url.searchParams;

      // νΉμ • νλΌλ―Έν„° κ°’ μ½κΈ°
      console.log(params.get('query'));  // μ¶λ ¥: apple
      ```

3. error.js

- μ£Όμ
  - κ°™μ€ μμ¤€μ layoutμ—μ„ μ—λ¬κ°€ λ°μƒν•  κ²½μ° ν•΄λ‹Ή error μ»΄ν¬λ„νΈλ΅ μ΄λ™ν•μ§€ μ•λ”λ‹¤.
    - <Layout><Error>{children}<Error><Layout> κµ¬μ΅°λ΅ layoutμ΄ λ” μƒμ„μ΄κΈ° λ•λ¬Έμ΄λ‹¤.
    - layoutμ—μ„ λ°μƒν•λ” μ—λ¬λ¥Ό μ²λ¦¬ν•κ³  μ‹¶λ‹¤λ©΄ μƒμ„ μ»΄ν¬λ„νΈμ errorλ¥Ό μ‚¬μ©ν•κ±°λ‚, appμ λ£¨νΈ μ—λ¬ μ²λ¦¬λ¥Ό λ‹΄λ‹Ήν•λ” app/global-error.js νμ΄μ§€λ¥Ό μƒμ„±ν•λ©΄ λλ‹¤.

4. not-found.js

- λΌμ°ν… ν•μ„μ μ£Όμ†λ¥Ό μ°Ύμ„ μ μ—†λ” 404 νμ΄μ§€λ¥Ό λ λ”λ§ν•  λ• μ‚¬μ©λλ‹¤.

5. loading.js

- loadingμ€ Suspenseλ¥Ό κΈ°λ°μΌλ΅ ν•΄λ‹Ή μ»΄ν¬λ„νΈκ°€ λ¶λ¬μ¤λ” μ¤‘μ„μ„ λ‚νƒ€λ‚Ό λ• μ‚¬μ©ν•  μ μλ‹¤.

6. route.js

- λ””λ ‰ν„°λ¦¬κ°€ λΌμ°ν… μ£Όμ†λ¥Ό λ‹΄λ‹Ήν•λ©° νμΌλ…μ€ route.jsλ΅ ν†µμΌ λλ‹¤.
- `app/hello/route.ts` νμΌ λ‚΄λ¶€μ— Rest APIμ get, postμ™€ κ°™μ€ λ©”μ„λ“λ…μ„ μμ•½μ–΄λ΅ μ„ μ–Έν•΄ λ‘λ©΄ HTTP μ”μ²­μ— λ§κ² ν•΄λ‹Ή λ©”μ„λ“λ¥Ό νΈμ¶ν•λ” λ°©μ‹μΌλ΅ μ‘λ™ν•λ‹¤.
  ```
  export async function GET(request: Request) {}
  ```
- app/api μ™Έμ— λ‹¤λ¥Έ κ³³μ—μ„ μ„ μ–Έν•΄λ„ μ‘λ™ν•λ‹¤.
- μ£Όμ
  - route.tsκ°€ μ΅΄μ¬ν•λ” ν΄λ” λ‚΄λ¶€μ—λ” page.tsxκ°€ μ΅΄μ¬ ν•  μ μ—†λ‹¤.

### 11.2 λ¦¬μ•΅νΈμ—μ„μ μ„λ²„ μ»΄ν¬λ„νΈ

#### 11.2.1 κΈ°μ΅΄ λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈμ™€ μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§μ ν•κ³„

- λΈλΌμ°μ €μ λ λ”λ§
  - λ¦¬μ•΅νΈμ λ¨λ“  μ½”λ“λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ μ‘λ™ν•λ©°, λΈλΌμ°μ €μ—μ„ JS μ½”λ“ μ²λ¦¬κ°€ μ΄λ¤„μ§„λ‹¤.
  - ex. λ¦¬μ•΅νΈλ΅ λ§λ“¤μ–΄μ§„ νμ΄μ§€λ¥Ό λ°©λ¬Έν•λ‹¤κ³  κ°€μ •ν–μ„λ•.
    - μ›Ήμ‚¬μ΄νΈλ¥Ό λ°©λ¬Έν•λ©΄ λΈλΌμ°μ €κ°€ λ¦¬μ•΅νΈ μ‹¤ν–‰μ— ν•„μ”ν• μ½”λ“λ¥Ό λ‹¤μ΄λ΅λ“ν•κ³  => λ¦¬μ•΅νΈ νΈλ¦¬λ¥Ό λ§λ“  λ‹¤μ => DOMμ— λ λ”λ§ ν•©λ‹λ‹¤.
- SSR
  - λ―Έλ¦¬ μ„λ²„μ—μ„ DOMμ„ λ§λ“¤μ–΄ μ¤κ³  => ν΄λΌμ΄μ–ΈνΈμ—μ„λ” μ΄λ ‡κ² λ§λ“¤μ–΄μ§„ DOMμ„ κΈ°μ¤€μΌλ΅ ν•μ΄λ“λ μ΄μ…μ„ μ§„ν–‰ν•λ‹¤. => μ΄ν›„ λΈλΌμ°μ €μ—μ„λ” μƒνƒλ¥Ό μ¶”μ ν•κ³  => μ΄λ²¤νΈ ν•Έλ“¤λ¬λ¥Ό DOMμ— μ¶”κ°€ν•κ³  => μ‘λ‹µμ— λ”°λΌ λ λ”λ§ νΈλ¦¬λ¥Ό λ³€κ²½ν•κΈ°λ„ ν•λ‹¤.
- Reactμ™€ Next.jsμ—μ„ μ κ³µν•λ” SSRμ ν•κ³„μ 

  1. JS λ²λ“¤ ν¬κΈ°κ°€ 0μΈ μ»΄ν¬λ„νΈλ¥Ό λ§λ“¤ μ μ—†λ‹¤.
     <details> 
     <summary>π“λ²λ“¤λ§</summary>
        JavaScriptμ—μ„ "λ²λ“¤(bundle)"μ€ μ—¬λ¬ κ°μ JavaScript νμΌκ³Ό κ·Έμ™€ κ΄€λ ¨λ λ¦¬μ†μ¤(μ: CSS, μ΄λ―Έμ§€ λ“±)λ¥Ό ν•λ‚μ νμΌλ΅ λ¬¶λ” κ³Όμ •μ„ μλ―Έν•©λ‹λ‹¤. λ²λ“¤λ§μ„ ν†µν•΄ μ• ν”λ¦¬μΌ€μ΄μ…μ μ„±λ¥μ„ μµμ ν™”ν•κ³ , νμΌ λ΅λ“ μ‹κ°„μ„ λ‹¨μ¶•ν•λ©°, λ„¤νΈμ›ν¬ μ”μ²­μ μλ¥Ό μ¤„μΌ μ μμµλ‹λ‹¤.

     - λ²λ“¤λ§μ μ£Όμ” μ΄μ 

       1. νμΌ ν¬κΈ° κ°μ†: μ—¬λ¬ νμΌμ„ ν•λ‚λ΅ ν•©μΉκ³ , μ••μ¶•ν•¨μΌλ΅μ¨ μ „μ²΄ νμΌ ν¬κΈ°λ¥Ό μ¤„μΌ μ μμµλ‹λ‹¤.
       2. λ„¤νΈμ›ν¬ μ”μ²­ κ°μ†: μ—¬λ¬ κ°μ νμΌμ„ ν•λ‚λ΅ ν•©μ³ ν• λ²μ— λ΅λ“ν•λ―€λ΅ λ„¤νΈμ›ν¬ μ”μ²­ νμλ¥Ό μ¤„μΌ μ μμµλ‹λ‹¤.
       3. μμ΅΄μ„± κ΄€λ¦¬: μμ΅΄μ„± μ¶©λμ„ λ°©μ§€ν•κ³ , λ¨λ“ κ°„μ μΆ…μ†μ„±μ„ μ²΄κ³„μ μΌλ΅ κ΄€λ¦¬ν•  μ μμµλ‹λ‹¤.
       4. μΊμ‹± ν¨μ¨μ„± μ¦κ°€: λ²λ“¤λ νμΌμ„ μΊμ‹ν•λ©΄ λΈλΌμ°μ €κ°€ λ™μΌν• νμΌμ„ λ‹¤μ‹ λ‹¤μ΄λ΅λ“ν•  ν•„μ”κ°€ μ—†μµλ‹λ‹¤.

     - λ€ν‘μ μΈ λ²λ“¤λ¬ λ„κµ¬λ΅λ” Webpack, Rollup, Parcel λ“±μ΄ μμΌλ©°, μ΄ λ„κµ¬λ“¤μ€ ν”„λ΅μ νΈμ κµ¬μ΅°μ™€ μ”κµ¬ μ‚¬ν•­μ— λ§κ² λ²λ“¤λ§μ„ μλ™ν™”ν•κ³  μµμ ν™”ν•΄μ¤λ‹λ‹¤.

     - μ΄λ¬ν• λ²λ“¤λ¬λ“¤μ€ λν• νΈλ¦¬ μ‰μ΄ν‚Ή(tree shaking) κ°™μ€ μµμ ν™” κΈ°λ²•μ„ μ‚¬μ©ν•μ—¬, μ‹¤μ λ΅ μ‚¬μ©λμ§€ μ•λ” μ½”λ“(μ£½μ€ μ½”λ“)λ¥Ό μ κ±°ν•¨μΌλ΅μ¨ λ²λ“¤ νμΌμ ν¬κΈ°λ¥Ό λ”μ± μ¤„μ—¬μ¤λ‹λ‹¤.

     </details>

  2. λ°±μ—”λ“ λ¦¬μ†μ¤μ— λ€ν• μ§μ ‘μ μΈ μ ‘κ·Όμ΄ λ¶κ°€ν•λ‹¤.
  3. **μλ™** μ½”λ“ λ¶„ν• μ΄ λ¶κ°€λ¥ν•λ‹¤.

  - μ½”λ“ λ¶„ν• μ΄λ€ μ½”λ“λ¥Ό μ—¬λ¬ μ‘μ€ λ‹¨μ„λ΅ λ‚λ„μ–΄ ν•„μ”ν•  λ•λ§ λ™μ μΌλ΅ μ§€μ—°ν•¨μΌλ΅μ¨ μ•±μ„ μ΄κΈ°ν™”ν•λ” μ†λ„λ¥Ό λ†’μ—¬μ£Όλ” κΈ°λ²•μ„ λ§ν•©λ‹λ‹¤.
  - lazyλ¥Ό μ‚¬μ©ν•μ—¬ κ°€λ¥ν•μ§€λ§, μΌμΌμ΄ lazyλ΅ κ°μ‹Έμ•Ό ν•λ‹¤λ” λ²κ±°λ΅μ›€κ³Ό μ½”λ“ λ¶„ν• μ„ ν•΄λ„ λλ” μ»΄ν¬λ„νΈμΈμ§€ μ λ…ν•κ³  κ°λ°ν•΄μ•Ό ν•κΈ° λ•λ¬Έμ— μ΄λ¥Ό λ„λ½ν•λ” κ²½μ°κ°€ λ°μƒν•  μ μλ‹¤.

  4. μ—°μ‡„μ μΌλ΅ λ°μƒν•λ” ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„μ μ”μ²­μ„ λ€μ‘ν•κΈ° μ–΄λ µλ‹¤.
  5. μ¶”μƒν™”μ— λ“λ” λΉ„μ©μ΄ μ¦κ°€ν•λ‹¤.

- **μ •λ¦¬**
  - CSR
    - μ‚¬μ©μμ μΈν„°λ ‰μ…μ— λ”°λΌ λ‹¤μ–‘ν• κ²ƒλ“¤μ„ μ κ³µν•  μ μλ‹¤. ν•μ§€λ§ μ„λ²„μ— λΉ„ν•΄ λλ¦¬κ³  λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤κΈ° μ–΄λ µλ‹¤.
  - SSR
    - μ‘λ‹µλ°›μ€ νμ΄μ§€ μ „μ²΄λ¥Ό HTMLλ΅ λ λ”λ§ν•λ” κ³Όμ •(DOMμ„ λ§λ“ λ‹¤)μ„ μ„λ²„μ—μ„ μν–‰ν• ν›„, κ·Έ κ²°κ³Όλ¥Ό ν΄λΌμ΄μ–ΈνΈμ— λ‚΄λ ¤μ¤€λ‹¤. => μ΄ν›„ ν΄λΌμ΄μ–ΈνΈμ—μ„ ν•μ΄λ“λ μ΄μ… κ³Όμ •μ„ κ±°μ³ μ„λ²„μ κ²°κ³Όλ¬Όμ„ ν™•μΈν•κ³  μ΄λ²¤νΈλ¥Ό λ¶™μ΄λ” λ“±μ μ‘μ—…μ„ μν–‰ν•λ‹¤.
      - SSRμ λ©μ  : μ΄κΈ°μ— μΈν„°λ ‰μ…μ€ λ¶κ°€λ¥ν•μ§€λ§(JSκ°€ μ—†κΈ° λ•λ¬Έμ—) μ •μ μΈ HTMLμ„ λΉ λ¥΄κ² λ‚΄λ ¤μ£Όλ” λ° μ΄μ μ„ λ‘κ³  μλ‹¤.
        => λ”°λΌμ„ μ—¬μ „ν μ΄κΈ° HTMLμ΄ λ΅λ”©λ μ΄ν›„μ—λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ JS μ½”λ“λ¥Ό λ‹¤μ΄λ΅λ“ν•κ³ , νμ‹±ν•κ³ , μ‹¤ν–‰ν•λ” λ° λΉ„μ©μ΄ λ“ λ‹¤.
    - μ •μ  μ½ν…μΈ λ¥Ό λΉ λ¥΄κ² μ κ³µν•κ³ , μ„λ²„μ— μλ” λ°μ΄ν„°μ— μ†μ‰½κ² μ κ³µν•  μ μλ‹¤.
  - μ΄λ¬ν• λ‘ κµ¬μ΅°μ μ¥μ μ„ λ¨λ‘ μ·¨ν•κ³ μ ν•λ” κ²ƒμ΄ λ°”λ΅ λ¦¬μ•΅νΈ μ„λ²„ μ»΄ν¬λ„νΈμ΄λ‹¤.

#### 11.2.2 μ„λ²„ μ»΄ν¬λ„νΈ

- β­οΈ μ„λ²„ μ»΄ν¬λ„νΈ μ΄λ΅ μ΄λ€?
  - `ν•λ‚μ μ–Έμ–΄`, `ν•λ‚μ ν”„λ μ„μ„ν¬`, κ·Έλ¦¬κ³  `ν•λ‚μ APIμ™€ κ°λ…`μ„ μ‚¬μ©ν•λ©΄μ„, **μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘**μ—μ„ **μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§**ν•  μ μλ” κΈ°λ²•μ„ μλ―Έν•λ‹¤.
  - μ„λ²„κ°€ ν•  μ μλ” μΌμ€ μ„λ²„κ°€ μ²λ¦¬ν•κ² λ‘κ³ , μ„λ²„κ°€ ν•  μ μ—†λ” λ‚λ¨Έμ§€ μ‘μ—…μ€ ν΄λΌμ΄μ–ΈνΈμΈ λΈλΌμ°μ €μ—μ„ μν–‰λλ‹¤.
  - μ¦‰, μΌλ¶€ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈμ—μ„ λ λ”λ§λκ³ , μΌλ¶€ μ»΄ν¬λ„νΈλ” μ„λ²„μ—μ„ λ λ”λ§λλ‹¤.
  - β—οΈμ£Όμ
    - ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό import ν• μ μ—†λ‹¤.
    - μ΄μ 
      - λ§μ•½ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό λ¶λ¬μ¤κ² λλ‹¤λ©΄ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μ‹¤ν–‰ν•  λ°©λ²•μ΄ μ—†κΈ° λ•λ¬Έμ—(μ„λ²„ ν™κ²½μ΄ λΈλΌμ°μ €μ—λ” μ΅΄μ¬ν•μ§€ μ•μΌλ―€λ΅) μ»΄ν¬λ„νΈλ¥Ό νΈμ¶ν•  μ μ—†λ‹¤.
  - μ •λ¦¬
    - μ„λ²„ μ»΄ν¬λ„νΈ μ΄λ΅ μ— λ”°λ¥΄λ©΄ λ¨λ“  μ»΄ν¬λ„νΈλ” μ„λ²„ μ»΄ν¬λ„νΈκ°€ λ  μ μκ³  ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ λ  μ μλ‹¤.
    - μ–΄λ–»κ² μ΄λ° κµ¬μ΅°κ°€ κ°€λ¥ν• κ²ƒμΌκΉ?
      - `childrenμΌλ΅ μμ£Ό μ‚¬μ©λλ” ReactNodeμ— λ‹¬λ ¤ μλ‹¤.`
- κ²½μ°μ μ (1.μ„λ²„ μ»΄ν¬λ„νΈ 2.ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ 3.κ³µμ  μ»΄ν¬λ„νΈ)

  1. μ„λ²„ μ»΄ν¬λ„νΈ

     - μ”μ²­μ΄ μ¤λ©΄ κ·Έ μκ°„ μ„λ²„μ—μ„ λ”± ν• λ² μ‹¤ν–‰λ  λΏμ΄λ―€λ΅ μƒνƒλ¥Ό κ°€μ§ μ μ—†λ‹¤. λ”°λΌμ„ λ¦¬μ•΅νΈμ—μ„ μƒνƒλ¥Ό κ°€μ§ μ μλ” useState, useReducer λ“±μ ν›…μ„ μ‚¬μ©ν•  μ μ—†λ‹¤.
     - λ λ”λ§ μƒλ…μ£ΌκΈ°λ„ μ‚¬μ©ν•  μ μ—†λ‹¤. ν•λ² λ λ”λ§λλ©΄ κ·Έκ±Έλ΅ λμ΄κΈ° λ•λ¬Έμ΄λ‹¤. => useEffect, useLayoutEffectλ¥Ό μ‚¬μ©ν•  μ μ—†λ‹¤.
     - λΈλΌμ°μ €μ—μ„ μ‹¤ν–‰λμ§€ μ•κ³  μ„λ²„μ—μ„λ§ μ‹¤ν–‰λκΈ° λ•λ¬Έμ— DOM APIλ¥Ό μ“°κ±°λ‚ window,document λ“±μ— μ ‘κ·Όν•  μ μ—†λ‹¤.
     - db, λ‚΄λ¶€ μ„λΉ„μ¤, νμΌ μ‹μ¤ν… λ“± μ„λ²„μ—μ„λ§ μλ” λ°μ΄ν„°λ¥Ό async/await μΌλ΅ μ ‘κ·Όν•  μ μλ‹¤. μ»΄ν¬λ„νΈ μμ²΄κ°€ async(λΉ„λ™κΈ°)ν• κ²ƒμ΄ κ°€λ¥ν•λ‹¤.

  2. ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ

     - λΈλΌμ°μ € ν™κ²½μ—μ„λ§ μ‹¤ν–‰λλ―€λ΅ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό λ¶λ¬μ¤κ±°λ‚, μ„λ²„ μ „μ© ν›…μ΄λ‚ μ ν‹Έλ¦¬ν‹°λ¥Ό λ¶λ¬μ¬ μ μ—†λ‹¤.

       > - ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό λ¶λ¬μ¬ μ μ—†λ‹¤.
       > - ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό children propsλ΅ λ°›λ” κ²ƒλ§ κ°€λ¥ν•λ‹¤.
       > - μ„λ²„ μ»΄ν¬λ„νΈλ” λ‹¤λ¥Έ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•  μ μλ‹¤.
       > - μ„λ²„ μ»΄ν¬λ„νΈλ” λ‹¤λ¥Έ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό λ¶λ¬μ™€ λ λ”λ§ ν•  μ μλ‹¤.
       > - μ„λ²„ μ»΄ν¬λ„νΈκ°€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•λ”λ°, κ·Έ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈκ°€ μμ‹μΌλ΅ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό κ°–λ” κµ¬μ΅°λ” κ°€λ¥ν•λ‹¤. (κ³µμ© μ»΄ν¬λ„νΈ)
       >   - μ΄μ  : ν΄λΌμ΄μ–ΈνΈ μ…μ¥μ—μ„ λ΄¤μ„ λ• μ„λ²„ μ»΄ν¬λ„νΈλ” μ΄λ―Έ μ„λ²„μ—μ„ λ§λ“¤μ–΄μ§„ νΈλ¦¬λ¥Ό κ°€μ§€κ³  μμ„ κ²ƒμ΄κ³ (`ParentServerComponent`κ°€ λ λ”λ§ λ  λ• νΈλ¦¬κ°€ λ§λ“¤μ–΄ μ§„λ‹¤.), ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ΄λ―Έ μ„λ²„μ—μ„ λ§λ“¤μ–΄μ§„ νΈλ¦¬λ¥Ό μ‚½μ…ν•΄μ„ λ³΄μ—¬μ£ΌκΈ°λ§ ν•κΈ° λ•λ¬Έμ΄λ‹¤.

       ```
       // κ³µμ© μ»΄ν¬λ„νΈ
       import ClientComponent from './ClientComponent'
       import ServerComponent from './ServerComponent'

       export default function ParentServerComponent() {
         return (
           <ClientComponent>
             <ServerComponent/>
           </ClientComponent>
         )
       }
       ```

  3. κ³µμ© μ»΄ν¬λ„νΈ

  - μ΄ μ»΄ν¬λ„νΈλ” μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘μ—μ„ μ‚¬μ©ν•  μ μλ‹¤.
  - κ³µν†µμΌλ΅ μ‚¬μ©ν•  μ μλ” λ§νΌ, μ„λ²„ μ»΄ν¬λ„νΈμ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ λ¨λ“  μ μ•½μ„ λ°›λ” μ»΄ν¬λ„νΈκ°€ λλ‹¤.

- **λ¦¬μ•΅νΈλ” μ–΄λ–»κ² μ„λ²„ μ»΄ν¬λ„νΈμΈμ§€, ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμΈμ§€, κ³µμ© μ»΄ν¬λ„νΈμΈμ§€ νλ‹¨ν• κΉ?**
  - λ¦¬μ•΅νΈλ” λ¨λ“  κ²ƒμ„ λ‹¤ κ³µμ© μ»΄ν¬λ„νΈλ΅ νλ‹¨ν•λ‹¤. μ¦‰, λ¨λ“  μ»΄ν¬λ„νΈλ¥Ό λ‹¤ μ„λ²„μ—μ„ μ‹¤ν–‰ κ°€λ¥ν• κ²ƒμΌλ΅ λ¶„λ¥ν•λ‹¤. λ€μ‹  ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλΌλ” κ²ƒμ„ λ…μ‹μ μΌλ΅ μ„ μ–Έν•λ ¤λ©΄ νμΌμ λ§¨ μ²« μ¤„μ— `"use client"` λΌκ³  μ‘μ„±ν•΄ λ‘λ©΄ λλ‹¤.

#### 11.2.3 μ„λ²„ μ‚¬μ΄λ“ λ λ”λ§κ³Ό μ„λ²„ μ»΄ν¬λ„νΈμ μ°¨μ΄

- λ‘μ€ λ€μ²΄μ κ°€ μ•„λ‹ μƒνΈλ³΄μ™„ν•λ” κ°λ…μ΄λ‹¤.

#### 11.2.4 λ¦¬μ•΅νΈμ—μ„ μ„λ²„ μ»΄ν¬λ„νΈλ” μ–΄λ–»κ² μ‘λ™ν•λ”κ°€?

1. μ„λ²„κ°€ λ λ”λ§ μ”μ²­μ„ λ°›λ”λ‹¤. μ„λ²„κ°€ λ λ”λ§ κ³Όμ •μ„ μν–‰ν•΄μ•Ό ν•λ―€λ΅ λ¦¬μ•΅νΈ μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό μ‚¬μ©ν•λ” λ¨λ“  νμ΄μ§€λ” ν•­μƒ μ„λ²„μ—μ„ μ‹μ‘λλ‹¤. μ¦‰, λ£¨νΈμ— μλ” μ»΄ν¬λ„νΈλ” ν•­μƒ μ„λ²„ μ»΄ν¬λ„νΈλ‹¤. μλ¥Ό λ“¤μ–΄, '/react' λΌκ³  ν•λ μ£Όμ†λ΅ μ”μ²­μ„ λ³΄λ‚΄λ©΄ μ„λ²„λ” λΈλΌμ°μ €μ μ”μ²­μ„ λ°›κ³  μ„λ²„ λ λ”λ§μ„ μ‹μ‘ν•λ‹¤.

2. μ„λ²„λ” λ°›μ€ μ”μ²­μ— λ”°λΌ μ»΄ν¬λ„νΈλ¥Ό JSONμΌλ΅ μ§λ ¬ν™”(serialize) ν•λ‹¤. μ΄λ• μ„λ²„μ—μ„ λ λ”λ§ν•  μ μλ” κ²ƒμ€ μ§λ ¬ν™”ν•΄μ„ λ‚΄λ³΄λ‚΄κ³ , ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ΅ ν‘μ‹λ λ¶€λ¶„μ€ ν•΄λ‹Ή κ³µκ°„μ„ ν”λ μ΄μ¤ν™€λ” ν•μ‹μΌλ΅ λΉ„μ›λ‘κ³  λ‚νƒ€λ‚Έλ‹¤. μ„λ²„λ” μ™€μ΄μ–΄ ν¬λ§· ν•νƒλ΅ ν΄λΌμ΄μ–ΈνΈμ— **μ¤νΈλ¦¬λ°**ν•΄ μ κ³µν•λ‹¤. λΈλΌμ°μ €λ” μ΄ν›„μ— μ΄ κ²°κ³Όλ¬Όμ„ λ°›μ•„μ„ λ‹¤μ‹ μ—­μ§λ ¬ν™”ν• λ‹¤μ λ λ”λ§μ„ μν–‰ν•λ‹¤.

   > μ™€μ΄μ–΄ ν¬λ§·
   >
   > - μ„λ²„μ—μ„λ” ν΄λΌμ΄μ–ΈνΈμ—μ„ λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈ νΈλ¦¬ κµ¬μ„±μ— ν•„μ”ν• μ •λ³΄λ¥Ό μµλ€ν• λ§μ΄, κ·Έλ¦¬κ³  κ²½μ μ μΈ ν¬λ§·μΌλ΅ ν΄λΌμ΄μ–ΈνΈμ— μ „λ‹¬ν•λ‹¤.
   >   M : MμΌλ΅ μ‹μ‘ν•λ” μ¤„μ€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ΄λ‹¤. ν•΄λ‹Ή ν•¨μλ¥Ό λ λ”λ§ν•κΈ° μ„ν•΄ ν•„μ”ν• μ •λ³΄κ°€ μ–΄λ””(chunk)μ— λ‹΄κ²¨ μλ”μ§€ μ°Έμ΅°λ¥Ό μ „λ‹¬ν•΄ μ¤€λ‹¤.
   >   S : Suspenseλ¥Ό μλ―Έν•λ‹¤.
   >   J : μ„λ²„μ—μ„ λ λ”λ§λ μ„λ²„ μ»΄ν¬λ„νΈμ΄λ‹¤. J0dμ€ App.server.jsλ¥Ό ν‘ν„ν• κ²ƒμ„μ„ μ•μ μλ‹¤.
   >   @1, @2 : λ‚μ¤‘μ— λ λ”λ§ λμ„ λ• λ“¤μ–΄κ°€μ•Ό ν•  μ»΄ν¬λ„νΈλ¥Ό μλ―Έν•λ‹¤. @1μ€ M1μ΄ λ λ”λ§λλ©΄ μ € @1 μλ¦¬μ— @M1μ΄ λ“¤μ–΄κ°€μ•Ό ν•λ‹¤λ” κ²ƒμ„ μλ―Έν•λ‹¤.

   ```
   // μ„λ²„κ°€ λ λ”λ§ μ”μ²­μ„ λ³΄λƒμ„ λ• ν΄λΌμ΄μ–ΈνΈμ— λ³΄λ‚΄λ” κ°’
   // μ™€μ΄μ–΄ ν¬λ§·(wire format)
   [
     "$",
     "section",
     null,
     {
       "className": "sidebar-menu",
       "role": "member",
       "children": [
         ["$", "@1", null, {}],
         [
           "$",
           "@2",
           null,
           {
             "notedId": null,
             "children": New
           }
         ]
       ]
     }
   ]
   ```

3. λΈλΌμ°μ €κ°€ λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈ νΈλ¦¬λ¥Ό κµ¬μ„±ν•λ‹¤. (λΈλΌμ°μ €κ°€ μ„λ²„λ΅ μ¤νΈλ¦¬λ°μΌλ΅ JSON κ²°κ³Όλ¬Όμ„ λ°›μ•λ‹¤λ©΄ μ΄ κµ¬λ¬Έμ„ λ‹¤μ‹ νμ‹±ν• κ²°κ³Όλ¬Όμ„ λ°”νƒ•μΌλ΅ νΈλ¦¬λ¥Ό μ¬κµ¬μ„±ν•΄ μ»΄ν¬λ„νΈλ¥Ό λ§λ“ λ‹¤. M1κ³Ό κ°™μ€ ν•νƒμ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό λ°›μ•λ‹¤λ©΄ ν΄λΌμ΄μ–ΈνΈμ—μ„ λ λ”λ§μ„ μ§„ν–‰ν•  κ²ƒμ΄κ³ , μ„λ²„μ—μ„ λ§λ“¤μ–΄μ§„ κ²°κ³Όλ¬Όμ„ λ°›μ•λ‹¤λ©΄ μ΄ μ •λ³΄λ¥Ό κΈ°λ°μΌλ΅ λ¦¬μ—‘νΈ νΈλ¦¬λ¥Ό κ·Έλ€λ΅ λ§λ“¤ κ²ƒμ΄λ‹¤.) μµμΆ…μ μΌλ΅ μ΄ νΈλ¦¬λ¥Ό λ λ”λ§ν•΄ λΈλΌμ°μ €μ DOMμ— μ»¤λ°‹ν•λ‹¤.

- **λ¦¬μ•΅νΈ μ„λ²„ μ»΄ν¬λ„νΈ μ‘λ™ λ°©μ‹μ νΉλ³„ν• μ **
  - μ„λ²„μ—μ„ ν΄λΌμ΄μ–ΈνΈλ΅ μ •λ³΄λ¥Ό λ³΄λ‚Ό λ• μ¤νΈλ¦¬λ° ν•νƒλ΅ λ³΄λƒ„μΌλ΅μ¨ ν΄λΌμ΄μ–ΈνΈκ°€ μ¤„ λ‹¨μ„λ΅ JSONμ„ μ½κ³  μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•  μ μμ–΄ λΈλΌμ°μ €μ—μ„λ” λλ„λ΅ λΉ¨λ¦¬ μ‚¬μ©μμ—κ² κ²°κ³Όλ¬Όμ„ λ³΄μ—¬μ¤„ μ μλ” μ¥μ μ΄ μλ‹¤.
  - κ° μ»΄ν¬λ„νΈμ λ²λ“¤λ§μ΄ λ³„κ°λ΅ λμ–΄ μμ–΄ ν•„μ”μ— λ”°λΌμ„ μ»΄ν¬λ„νΈλ¥Ό μ§€μ—°ν•΄μ„ λ°›κ±°λ‚ λ”°λ΅ λ°›λ” λ“±μ μ‘μ—…μ΄ κ°€λ¥ν•΄μ΅λ‹¤.
  - **SSR κ³Ό λ‹¤λ¥΄κ²** κ²°κ³Όλ¬Όμ΄ HTMLμ΄ μ•„λ‹ JSON ν•νƒλ΅ λ³΄λ‚΄μ§„λ‹¤. ν΄λΌμ΄μ–ΈνΈμ μµμΆ… λ©ν‘λ” λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈ νΈλ¦¬λ¥Ό μ„λ²„ μ»΄ν¬λ„νΈμ™€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ‘ κ°€μ§€λ΅ μ΅°ν™”λ΅­κ² κµ¬μ„±ν•λ” κ²ƒμΌλ΅, μ΄λ” λ‹¨μν HTMLμ„ κ·Έλ¦¬λ” μ‘μ—…μ΄μƒμ μΌμ„ ν•„μ”λ΅ ν•λ‹¤. λ”°λΌμ„ HTML λ€μ‹  λ‹¨μ ν•λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈ κµ¬μ΅°λ¥Ό JSONμΌλ΅ λ°›μ•„μ„ λ¦¬μ•΅νΈ μ»΄ν¬λ„νΈ νΈλ¦¬μ κµ¬μ„±μ„ μµλ€ν• λΉ λ¥΄κ² ν•  μ μκ² ν•λ‹¤.

### 11.3 Next.jsμ—μ„μ λ¦¬μ•΅νΈ μ„λ²„ μ»΄ν¬λ„νΈ

- κΈ°λ³Έμ μΌλ΅ Next.jsμ μ„λ²„ μ»΄ν¬λ„νΈμ μ μ•½μ€ Reactμ™€ λ™μΌν•λ‹¤.
  - μ„λ²„ μ»΄ν¬λ„νΈλ” ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ¥Ό λ¶λ¬μ¬ μ μ—†μΌλ©°, ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈλ” μ„λ²„ μ»΄ν¬λ„νΈλ¥Ό propsλ΅ λ°›λ” κ²ƒλ§ κ°€λ¥ν•λ‹¤.
- Reactμ—μ„λ” λ£¨νΈ μ»΄ν¬λ„νΈλ” λ¬΄μ΅°κ±΄ μ„λ²„ μ»΄ν¬λ„νΈκ°€ λμ—λ”λ°, Next.jsμ λ£¨νΈ μ»΄ν¬λ„νΈλ” κ° νμ΄μ§€μ— μ΅΄μ¬ν•λ” page.jsλ‹¤.
- page.jsμ™€ layout.jsλ” λ°λ“μ‹ μ„λ²„ μ»΄ν¬λ„νΈμ—¬μ•Ό ν•λ‹¤.

```
// page.js
import ClientComponent from './ClientComponent'
import ServerComponent from './ServerComponent'

// κ° νμ΄μ§€λ” κΈ°λ³ΈμΌλ΅ μ„λ²„ μ»΄ν¬λ„νΈλ΅ μ‘λ™ν•λ‹¤.
export default function Page() {
  return (
    <ClientComponent>
      <ServerComponent />
    </ClientComponent>
  )
}

```

- μ„ μ²λΌ ν•λ©΄ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ κ΄€μ μ—μ„ μ„λ²„ μ»΄ν¬λ„νΈλ” μ΄λ―Έ λ λ”λ§λ κ²°κ³Όλ¬Όλ΅ childrenμ— λ“¤μ–΄κ° κ²ƒμ΄κΈ° λ•λ¬Έμ— μ„λ²„ μ»΄ν¬λ„νΈ κµ¬μ΅°λ¥Ό κµ¬μ¶•ν•λ” λ° λ¬Έμ κ°€ μ—†λ‹¤.

#### 11.3.1 μƒλ΅μ΄ fetch λ„μ…κ³Ό getServerSideProps, getStaticProps, getInitialPropsμ μ‚­μ 

- **getServerSideProps, getStaticProps, getInitialProps** κ°€ /app λ””λ ‰ν„°λ¦¬ λ‚΄λ¶€μ—μ„ μ‚­μ λλ‹¤. κ·Έ λ€μ‹  λ¨λ“  λ°μ΄ν„° μ”μ²­μ€ μ›Ήμ—μ„ μ κ³µν•λ” ν‘μ¤€ APIμΈ **fetch**λ¥Ό κΈ°λ°μΌλ΅ μ΄λ¤„μ§„λ‹¤.
- μ„λ²„ μ»΄ν¬λ„νΈλ” λ°μ΄ν„°κ°€ λ¶λ¬μ¤κΈ° μ „κΉμ§€ κΈ°λ‹¤λ Έλ‹¤κ°€ λ°μ΄ν„°κ°€ λ¶λ¬μ™€μ§€λ©΄ λΉ„λ΅μ† νμ΄μ§€κ°€ λ λ”λ§λμ–΄ ν΄λΌμ΄μ–ΈνΈλ΅ μ „λ‹¬λ  κ²ƒμ΄λ‹¤.
- μ¶”κ°€λ΅ κ°™μ€ μ„λ²„ μ»΄ν¬λ„νΈ νΈλ¦¬ λ‚΄μ—μ„ λ™μΌν• μ”μ²­μ΄ μλ‹¤λ©΄ μ¬μ”μ²­μ΄ λ°μƒν•μ§€ μ•λ„λ΅ μ”μ²­ μ¤‘λ³µμ„ λ°©μ§€ν•  μ μλ‹¤.
  - SWRκ³Ό React Queryμ™€ λΉ„μ·ν•κ², ν•΄λ‹Ή fetch μ”μ²­μ— λ€ν• λ‚΄μ©μ„ μ„λ²„μ—μ„λ” λ λ”λ§μ΄ ν• λ² λλ‚  λ•κΉμ§€ μΊμ‹±ν•λ©°, ν΄λΌμ΄μ–ΈνΈμ—μ„λ” ν•΄λ‹Ή λ°μ΄ν„°λ¥Ό μµλ€ν• μΊμ‹±ν•΄μ„ μ¤‘λ³µλ μ”μ²­μ„ λ°©μ§€ν•λ‹¤.

#### 11.3.2 μ •μ  λ λ”λ§κ³Ό λ™μ  λ λ”λ§

- Next.js 13 μ—μ„λ”

  - μ •μ  λΌμ°ν… : κΈ°λ³Έμ μΌλ΅ λΉλ“ νƒ€μ„μ— λ λ”λ§μ„ λ―Έλ¦¬ ν•΄λ‘κ³  μΊμ‹±ν•΄ μ¬ μ‚¬μ©ν•  μ μκ²λ” ν•΄λ‘”λ‹¤.
  - λ™μ  λΌμ°ν… : μ„λ²„μ— λ§¤λ² μ”μ²­μ΄ μ¬ λ•λ§λ‹¤ μ»΄ν¬λ„νΈλ¥Ό λ λ”λ§ν•λ‹¤.

- μ •μ  λΌμ°ν…

  - μ£Όμ†κ°€ μ •μ μΌλ΅ κ²°μ •λμ–΄ μλ‹¤λ” κ²ƒμ€ `https://www.youtube.com/warch:${id}`μ™€ λ‹¬λ¦¬ `https://www.youtube.com/` μ™€ κ°™μ΄ λ³€ν•μ§€ μ•μ€ μ£Όμ†λ¥Ό μλ―Έν•λ‹¤.
  - μ •μ μΌλ΅ κ²°μ •λΌ μκΈ° λ•λ¬Έμ— λΉλ“ μ‹μ— ν•΄λ‹Ή μ£Όμ†λ΅ λ―Έλ¦¬ μ”μ²­μ„ ν•΄μ„ λ°μ΄ν„°λ¥Ό κ°€μ Έμ¨ λ‹¤μ λ λ”λ§μ„ ν• κ²°κ³Όλ¥Ό λΉλ“μ— λ„£μ–΄μ¤€λ‹¤.
  - μ½”λ“λ¥Ό λΉλ“ν• κ²°κ³Όλ¬Όμ„ .nextμ—μ„ ν™•μΈν•λ©΄ λ―Έλ¦¬ μ κ³µν•κΈ° μ„ν• test.htmlμ΄ ν•΄λ‹Ή APIμ κ²°κ³Όλ¬Όκ³Ό ν•¨κ» μƒμ„±λΌ μλ” κ²ƒμ„ λ³Ό μ μλ‹¤.
  - `fetch`μ— `{ cache: 'no-cache' }` μµμ…μ„ λ‹¬λ©΄ μΊμ‹±ν•μ§€ μ•κ² λ‹¤λ” μλ―Έλ΅ Next.jsλ” ν•΄λ‹Ή μ”μ²­μ„ λ―Έλ¦¬ λΉλ“ν•΄μ„ λ€κΈ°μ‹μΌ λ‘μ§€ μ•κ³  μ”μ²­μ΄ μ¬λ• λ§λ‹¤ fetch μ”μ²­ μ΄ν›„μ— λ λ”λ§μ„ μν–‰ν•κ² λλ‹¤.
  - λ§μ•½ λ™μ μΈ μ£Όμ†μ΄μ§€λ§ νΉμ • μ£Όμ†μ— λ€ν•΄μ„ μΊμ‹±ν•κ³  μ‹¶μ€ κ²½μ°, `generateStaticParams`λ¥Ό μ‚¬μ©ν•λ©΄ λλ‹¤.

    > fetch μµμ…
    >
    > - `fetch(URL, { cache: 'force-cache' })`
    >   κΈ°λ³Έκ°’μΌλ΅ λ¶λ¬μ¨ λ°μ΄ν„°λ¥Ό μΊμ‹±ν•΄ ν•΄λ‹Ή λ°μ΄ν„°λ΅λ§ κ΄€λ¦¬ν•λ‹¤.
    > - `fetch(URL, { cache: 'no-store' })`, `fetch(URL, { next: { revalidate: 0 } })`
    >   μΊμ‹±ν•μ§€ μ•κ³  λ§¤λ² μƒλ΅μ΄ λ°μ΄ν„°λ¥Ό λ¶λ¬μ¨λ‹¤.
    > - `fetch(URL, { revalidate: 10 })`
    >   μ •ν•΄μ§„ μ ν¨μ‹κ°„ λ™μ•μ—λ” μΊμ‹±ν•κ³ , μ΄ μ ν¨μ‹κ°„μ΄ μ§€λ‚λ©΄ μΊμ‹λ¥Ό νκΈ°ν•λ‹¤.

- revalidate κ°’μ΄ μ„¤μ •λ κ²½μ°μ— μΊμ‹μ™€ κ°±μ‹ μ΄ μ΄λ¤„μ§€λ” κ³Όμ •
  1. μµμ΄λ΅ ν•΄λ‹Ή λΌμ°νΈλ΅ μ”μ²­μ΄ μ¬ λ•λ” λ―Έλ¦¬ μ •μ μΌλ΅ μΊμ‹ν•΄ λ‘” λ°μ΄ν„°λ¥Ό λ³΄μ—¬μ¤€λ‹¤.
  2. μ΄ μΊμ‹λ μ΄κΈ° μ”μ²­μ€ revalidateμ— μ„ μ–Έλ κ°’ λ§ν° μ μ§€λλ‹¤.
  3. λ§μ•½ ν•΄λ‹Ή μ‹κ°„μ΄ μ§€λ‚λ„ μΌλ‹¨μ€ μΊμ‹λ λ°μ΄ν„°λ¥Ό λ³΄μ—¬μ¤€λ‹¤.
  4. Next.jsλ” μΊμ‹λ λ°μ΄ν„°λ¥Ό λ³΄μ—¬μ£Όλ” ν•νΈ, μ‹κ°„μ΄ κ²½κ³Όν–μΌλ―€λ΅ λ°±κ·ΈλΌμ΄λ“μ—μ„ λ‹¤μ‹ λ°μ΄ν„°λ¥Ό λ¶λ¬μ¨λ‹¤.
  5. 4λ²μ μ‘μ—…μ΄ μ„±κ³µμ μΌλ΅ λλ‚λ©΄ μΊμ‹λ λ°μ΄ν„°λ¥Ό κ°±μ‹ ν•κ³ , κ·Έλ ‡μ§€ μ•μΌλ©΄ κ³Όκ±° λ°μ΄ν„°λ¥Ό λ³΄μ—¬μ¤€λ‹¤.
  - β—οΈμΊμ‹λ¥Ό μ „μ²΄μ μΌλ΅ λ¬΄ν¨ν™” ν•κ³  μ‹¶λ‹¤λ©΄ routerμ— μ¶”κ°€λ refresh λ©”μ„λ“λ΅ `router.refresh();`λ¥Ό μ‚¬μ©ν•λ©΄ λλ‹¤.
    => μ΄λ” λΈλΌμ°μ €λ¥Ό μƒλ΅κ³ μΉ¨ν•λ” λ“± λΈλΌμ°μ €μ νμ¤ν† λ¦¬μ— μν–¥μ„ λ―ΈμΉμ§€ μ•κ³ , μ¤λ΅μ§€ μ„λ²„μ—μ„ λ£¨νΈλ¶€ν„° λ°μ΄ν„°λ¥Ό μ „μ²΄μ μΌλ΅ κ°€μ Έμ™€μ„ κ°±μ‹ ν•λ‹¤.
    λΈλ¬μ°μ €λ‚ λ¦¬μ•΅νΈμ stateμ—λ” μν–¥μ„ λ―ΈμΉμ§€ μ•λ”λ‹¤.

#### 11.3.4 μ¤νΈλ¦¬λ°μ„ ν™μ©ν• μ μ§„μ μΈ νμ΄μ§€ λ¶λ¬μ¤κΈ°

- SSR
  - μ”μ²­λ°›μ€ νμ΄μ§€λ¥Ό λ¨λ‘ λ λ”λ§ν•΄μ„ λ‚΄λ ¤μ¤„ λ• κΉμ§€λ” μ‚¬μ©μμ—κ² μ•„λ¬΄κ²ƒλ„ λ³΄μ—¬ μ¤„ μ μ—†μ–΄ μ‚¬μ©μλ” λΉ νμ΄μ§€λ§ λ³΄κ² λλ‹¤.
  - νμ΄μ§€λ¥Ό λ‹¤ λ°›μ•λ‹¤κ³  ν•΄λ„ μ‚¬μ©μκ°€ μΈν„°λ ‰μ… ν•  μ μ—†λ” μ •μ  νμ΄μ§€μ΄λ‹¤.
  - λ¬Έμ λ” μ΄ μ‘μ—…μ΄ μμ°¨μ μΌλ΅ λ‹¤ μ™„λ£λΌμ•Όλ§ νμ΄μ§€ ν•λ‚λ¥Ό μ¨μ „ν•κ² λ³Ό μ μλ‹¤λ” κ²ƒμ΄λ‹¤.
  - μ΄λ¥Ό ν•΄κ²°ν•κΈ° μ„ν•΄ **μ¤νΈλ¦¬λ°**μ΄ λ„μ…λλ‹¤.
- server component

  - **μ¤νΈλ¦¬λ°**μ€ νμ΄μ§€κ°€ λ‹¤ μ™„μ„±λ  λ• κΉμ§€ κΈ°λ‹¤λ¦¬λ” κ²ƒμ΄ μ•„λ‹λΌ HTMLμ„ μ‘μ€ λ‹¨μ„λ΅ μΌκ°μ„ μ™„μ„±λλ” λ€λ΅ ν΄λΌμ΄μ–ΈνΈλ΅ μ μ§„μ μΌλ΅ λ³΄λ‚΄λ” λ°©μ‹μ΄λ‹¤.
  - μ¤νΈλ¦¬λ°μ„ μ‚¬μ©ν•λ©΄ λ¨Όμ € λ΅λ“λλ” λ°μ΄ν„°λ¥Ό λ°”λ΅ λ°”λ΅ λ³΄λ‚΄ μ£ΌκΈ° λ•λ¬Έμ— μ‚¬μ©μκ°€ μΌλ¶€λΌλ„ λΉ¨λ¦¬ νμ΄μ§€μ™€ μΈν„°λ ‰μ…μ„ ν•  μ μλ‹¤.
  - μ΄λ΅ μΈν•΄ νμ΄μ§€κ°€ λ΅λ”© μ¤‘μ΄λΌλ” μΈμ‹μ„ λ” λ…ν™•ν•κ² μ‹¬μ–΄μ¤„ μ μλ‹¤.
  - μ¤νΈλ¦¬λ°μ„ ν™μ©ν•  μ μλ” 2κ°€μ§€ λ°©λ²•

    1. κ²½λ΅μ— loading.tsx λ°°μΉ

    - μ•„λ μ½”λ“μ™€ κ°™μ΄ suspenseμ™€ ν•¨κ» μ‚¬μ©ν•λ‹¤.

      - νμ΄μ§€ μ „μ²΄μ λ΅λ”© μƒν™©μ— λ€ν•΄ loading.tsx νμΌμ λ΅λ”© μ»΄ν¬λ„νΈκ°€ μ μ©λλ‹¤.

        ```
        <Suspense fallback={<Loading />}>
          <Page />
        </Suspense>
        ```

    2. suspense λ°°μΉ

    - μΆ€ λ” μ„Έλ¶„ν™” λ μ μ–΄λ¥Ό ν•κ³  μ‹¶λ‹¤λ©΄ μ§μ ‘ λ¦¬μ•΅μμ suspenseλ¥Ό νμ΄μ§€μ κ°κ°μ μ»΄ν¬λ„νΈμ— μ μ©ν•λ” κ²ƒλ„ κ°€λ¥ν•λ‹¤.

      ```
      import { Suspense } from 'react'
      import { Notes, Peoples } from './Components'

      export default function Posts() {
        return (
          <section>
            <Suspense fallback={<Skeleton />}>
              <Notes />
            </Suspense>
            <Suspense fallback={<Skeleton />}>
              <Peoples />
            </Suspense>
          </section>
        )
      }

      ```

- μ •λ¦¬
  - μ„λ²„ μ»΄ν¬λ„νΈλ” μ¤νΈλ¦¬λ°μ„ ν™μ©ν•΄ μ„λ²„μ—μ„ λ λ”λ§μ΄ κ°€λ¥ν•΄μ§€κ³ , λ¦¬μ•΅νΈλ” λ΅λ”©μ΄ λλ‚ μ»΄ν¬λ„νΈ μμ„λ€λ΅ ν•μ΄λ“λ μ΄μ…μ„ μν–‰ν•΄ κ°€λ¥ν• ν• μ‚¬μ©μμ—κ² λΉ λ¥΄κ² μƒνΈμ‘μ©μ΄ κ°€λ¥ν• νμ΄μ§€λ¥Ό μ κ³µν•  μ μκ² λλ‹¤.

### 11.4 μ›Ήν©μ λ€ν•­λ§, ν„°λ³΄ν©μ λ“±μ¥ (beta)

- Next.js 13μ—μ„ λ¶€ν„° μ›Ήν©μ ν›„κ³„μ
- λ¬μ¤νΈλ΅ μ‘μ„±λμ—κΈ° λ•λ¬Έμ— μ›Ήν© λ³΄λ‹¤ μµλ€ 700λ°°, Vite λ³΄λ‹¤ 10λ°° λΉ λ¥΄λ‹¤.

### 11.5 μ„λ²„ μ•΅μ… (alpha)

#### 11.5.1 form action

- `server action`μ„ λ§λ“¤λ ¤λ©΄

  - ν•¨μ λ‚΄λ¶€ λλ” νμΌ μƒλ‹¨μ— ν΄λΌμ΄μ–ΈνΈ μ„ μ–Έκ³Ό λΉ„μ·ν•κ² `use server` μ§€μ‹μλ¥Ό μ„ μ–Έν•΄μ•Ό ν•λ‹¤.
    - `use server` λ¥Ό μ‚¬μ©ν•κ² λλ©΄ μ„λ²„μ— λ°”λ΅ μ ‘κ·Ό κ°€λ¥ν•΄ μ§„λ‹¤.
    - `use server` λ‚΄μ μ‘μ—…μ€ μ„λ²„μ—μ„ μ΄λ£¨μ–΄μ§€κΈ° λ•λ¬Έμ— CORS μ΄μκ°€ λ”°λ΅ μ—†λ‹¤.
  - ν•¨μλ” λ°λ“μ‹ `async` μ—¬μ•Ό ν•λ‹¤.

- formμ— action propsλ¥Ό μ¶”κ°€ν•μ—¬ server action ν•¨μλ¥Ό formμ— μ—°κ²°ν•  μ μλ‹¤.

```
async function handleSubmit() {
  'use server'
  ...fetch logic
}


<form action={handleSubmit}>
  <button type="submit"></button>
</form>
```

- handleSubmitμ΄ μ΄λ²¤νΈλ¥Ό λ°μƒμ‹ν‚¤λ” κ²ƒμ€ ν΄λΌμ΄μ–ΈνΈμ§€λ§ μ‹¤μ λ΅ ν•¨μ μμ²΄κ°€ μν–‰λλ” κ²ƒμ€ μ„λ²„μ΄λ‹¤.

  - /server-action/form μΌλ΅ μ”μ²­μ΄ μν–‰λλ‹¤.

- server actionμ μ¥μ μ€ νΌκ³Ό μ‹¤μ  λ…Έμ¶λλ” λ°μ΄ν„°κ°€ μ—°λ™λΌ μμ„ λ• λ”μ± ν¨κ³Όμ μΌλ΅ μ‚¬μ©ν•  μ μλ‹¤.

  - μµμ΄μ— νμ΄μ§€λ¥Ό μ„λ²„μ—μ„ λ λ”λ§ν• μ΄ν›„μ— νΌμ—μ„ handleSubmitμΌλ΅ μ„λ²„μ— λ°μ΄ν„° μμ •μ„ μ”μ²­ => μμ •λ κ²°κ³Όλ¥Ό λ‹¤μ‹ μ΅°νν•΄μ„ μƒλ΅μ΄ κ²°κ³Όλ΅ λ λ”λ§ν•λ” μΌλ ¨μ κ³Όμ •μ΄ λ¨λ‘ νμ΄μ§€ μƒλ΅κ³ μΉ¨ μ—†μ΄ λ°μ΄ν„° μ¤νΈλ¦¬λ°μΌλ΅ μ΄λ¤„μ§„λ‹¤. (server mutation)

    > php : μ„λ²„ κΈ°λ° μ›Ή μ• ν”λ¦¬μΌ€μ΄μ…

- server mutation(μ„λ²„μ—μ„μ λ°μ΄ν„° μμ •)
  - server mutationμΌλ΅ μ‹¤ν–‰ν•  μ μλ” ν•¨μ
    1.redirect 2.revalidatePath 3.revalidateTag

#### 11.5.2 inputμ submitκ³Ό imageμ formAction

- form.actionκ³Ό λ§μ°¬κ°€μ§€λ΅ input type="submit" λλ” input type="image" μ— formAction prop μΌλ΅λ„ μ„λ²„μ•΅μ…μ„ μ¶”κ°€ ν•  μ μλ‹¤.

#### 11.5.3 startTransitionκ³Όμ μ—°λ™

μ„λ²„ μ•΅μ…μ€ useTransitionμ—μ„ μ κ³µν•λ” startTransitionμ—μ„λ„ μ„λ²„ μ•΅μ…μ„ ν™μ©ν•  μ μλ‹¤.

#### 11.5.4 server mutationμ΄ μ—†λ” μ‘μ—…

server mutationμ΄ ν•„μ”μ—†λ‹¤λ©΄ λ°λ“μ‹ μ„λ²„ μ•΅μ…μ„ useTransitionκ³Ό ν•¨κ» μ‚¬μ©ν•΄μ•Ό ν•μ§€λ§ λ³„λ„μ server mutationμ„ μ‹¤ν–‰ν•μ§€ μ•λ”λ‹¤λ©΄ λ°”λ΅ μ΄λ²¤νΈ ν—¨λ“¤λ¬μ— λ„£μ–΄λ„ λλ‹¤.

#### 11.5.5 μ„λ²„ μ•΅μ… μ‚¬μ© μ‹ μ£Όμν•  μ 

- μ„λ²„ μ•΅μ…μ€ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈ λ‚΄μ—μ„ μ •μλ  μ μ—†λ‹¤.
- μ„λ²„ μ•΅μ…μ„ import ν•λ” κ²ƒ λΏλ§ μ•„λ‹λΌ, props ν•νƒλ΅ μ„λ²„ μ•΅μ…μ„ ν΄λΌμ΄μ–ΈνΈ μ»΄ν¬λ„νΈμ— λ„κΈ°λ” κ²ƒ λν• κ°€λ¥ν•λ‹¤.

### 11.6 κ·Έ λ°–μ λ³€ν™”

- ν”„λ΅ μ νΈ μ „μ²΄ λΌμ°νΈμ—μ„ μ“Έ μ μλ” λ―Έλ“¤μ›¨μ–΄κ°€ κ°•ν™”λλ‹¤.
- SEOλ¥Ό μ‰½κ² μ‘μ„±ν•  μ μλ” κΈ°λ¥μ΄ μ¶”κ°€ λλ‹¤.
- μ •μ μΌλ΅ λ‚΄λ¶€ λ§ν¬λ¥Ό λ¶„μ„ν•  μ μλ” κΈ°λ¥ λ“± λ‹¤μ–‘ν• λ‚΄μ©μ΄ μ¶”κ°€ λλ‹¤.
